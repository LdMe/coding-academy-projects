{"ast":null,"code":"var _jsxFileName = \"/home/danel/EPITECH/projects/MERN/MERN_LaBoheme/src/components/user/LoginComponent.js\";\nimport React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { Modal, Form, FormControl, FormGroup, ControlLabel, HelpBlock, Checkbox, Radio, Button } from 'react-bootstrap';\nimport config from '../../config';\nconst axios = config.axios;\n\nclass LoginComponent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      success: false,\n      username: '',\n      password: '',\n      show: this.props.show,\n      parent: this.props.parent,\n      error: {\n        username: \"username can't be empty\",\n        password: \"password can't be empty\"\n      }\n    };\n\n    this.reset = function () {\n      this.setState({\n        success: false,\n        username: '',\n        password: '',\n        show: this.props.show,\n        parent: this.props.parent,\n        error: {\n          username: \"username can't be empty\",\n          password: \"password can't be empty\"\n        }\n      });\n    };\n\n    this.handleClose = () => {\n      this.reset();\n      this.setState({\n        show: false\n      });\n    };\n\n    this.handleShow = () => this.setState({\n      show: true\n    });\n\n    this.passwordHandler = event => {\n      let password = event.target.value;\n\n      if (password.length <= 3) {\n        let er = this.state.error;\n        er.password = \"password must be longer than 3 characters\";\n        this.setState({\n          error: er\n        });\n      } else if (password.length >= 16) {\n        let er = this.state.error;\n        er.password = \"password must be shorter than 16 characters\";\n        this.setState({\n          error: er\n        });\n      } else {\n        let er = this.state.error;\n        er.password = \"\";\n        this.setState({\n          error: er\n        });\n        this.setState({\n          password: password\n        });\n      }\n    };\n\n    this.usernameHandler = event => {\n      let name = event.target.value;\n      let username = event.target.value;\n\n      if (username.length <= 3) {\n        let er = this.state.error;\n        er.username = \"username must be longer than 4 characters\";\n        this.setState({\n          error: er\n        });\n        this.setState({\n          username: \"\"\n        });\n      } else if (username.length >= 16) {\n        let er = this.state.error;\n        er.username = \"username must be shorter than 16 characters\";\n        this.setState({\n          error: er\n        });\n        this.setState({\n          username: \"\"\n        });\n      } else {\n        let er = this.state.error;\n        er.username = \"\";\n        this.setState({\n          error: er\n        });\n        this.setState({\n          username: username\n        });\n      }\n    };\n\n    this.inputHandler = event => {\n      if (event.key == \"Enter\") {\n        if (event.target.type != \"button\") this.submitHandler(event);\n      }\n    };\n\n    this.showRegisterForm = event => {\n      event.preventDefault();\n\n      if (this.state.parent) {\n        this.handleClose();\n        this.state.parent.showRegisterForm(event);\n      }\n    };\n\n    this.submitHandler = event => {\n      let error_alert = \"\";\n\n      for (let error in this.state.error) {\n        if (this.state.error[error]) {\n          error_alert = error_alert + this.state.error[error] + \"\\n\";\n        }\n      }\n\n      if (error_alert) {\n        alert(error_alert);\n      } else {\n        let body = {\n          \"username\": this.state.username,\n          \"email\": this.state.email,\n          \"password\": this.state.password,\n          \"password_confirm\": this.state.password_confirm\n        };\n\n        const querystring = require('querystring');\n\n        axios.post(\"/login\", querystring.stringify(body)).then(res => {\n          if (res.data.token) {\n            config.updateToken(res.data.token);\n            config.updateToken(this.state.username, res.data.token); //this.setState({success:true});\n\n            this.handleClose();\n\n            if (this.state.parent) {\n              this.state.parent.refresh();\n            } //location.reload(true);\n\n          } else {\n            alert(res.data);\n          }\n        }).catch(function (error) {\n          console.log(error);\n          alert(error.message);\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.reset();\n    this.setState({\n      show: this.props.show\n    });\n    this.forceUpdate();\n    this.setState({\n      success: false\n    });\n  }\n\n  render() {\n    let modalStart = \"\";\n    let redirect = this.state.success;\n\n    if (redirect) {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      });\n    }\n\n    let name = this.state.username;\n    let greetings = \"\";\n\n    if (name) {\n      greetings = \"Welcome \" + name;\n    } else {\n      greetings = \"\";\n    }\n\n    if (this.props.modal) {\n      return React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Login\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, greetings), React.createElement(Form, {\n        onKeyDown: this.inputHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"formUsername\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"Username\"), React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Username\",\n        onChange: this.usernameHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Form.Control, {\n        type: \"password\",\n        placeholder: \"Password\",\n        onChange: this.passwordHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formSubmit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.submitHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \"Submit\"))), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"You don't have an account? \", React.createElement(\"a\", {\n        href: \"#\",\n        onClick: this.showRegisterForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Register\")))));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, greetings), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Login\"), React.createElement(Form, {\n      onKeyDown: this.inputHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"formUsername\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Username\"), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Username\",\n      onChange: this.usernameHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"formPassword\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"Password\"), React.createElement(Form.Control, {\n      type: \"password\",\n      placeholder: \"Password\",\n      onChange: this.passwordHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"formSubmit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.submitHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \"Submit\"))), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"You don't have an account? \", React.createElement(Link, {\n      to: \"/register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Register\")));\n  }\n\n}\n\nexport default LoginComponent;","map":{"version":3,"sources":["/home/danel/EPITECH/projects/MERN/MERN_LaBoheme/src/components/user/LoginComponent.js"],"names":["React","Link","Redirect","Modal","Form","FormControl","FormGroup","ControlLabel","HelpBlock","Checkbox","Radio","Button","config","axios","LoginComponent","Component","state","success","username","password","show","props","parent","error","reset","setState","handleClose","handleShow","passwordHandler","event","target","value","length","er","usernameHandler","name","inputHandler","key","type","submitHandler","showRegisterForm","preventDefault","error_alert","alert","body","email","password_confirm","querystring","require","post","stringify","then","res","data","token","updateToken","refresh","catch","console","log","message","componentDidMount","forceUpdate","render","modalStart","redirect","greetings","modal"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Link,Redirect} from 'react-router-dom'\nimport {Modal,Form, FormControl, FormGroup, ControlLabel, HelpBlock, Checkbox, Radio, Button} from 'react-bootstrap';\nimport config from '../../config';\nconst axios = config.axios;\nclass LoginComponent extends React.Component {\n\tstate = {\n\t\tsuccess: false,\n\t\tusername: '',\n\t\tpassword: '',\n\t\tshow:this.props.show,\n\t\tparent: this.props.parent,\n\t\terror : {\n\t\t\tusername: \"username can't be empty\",\n\t\t\tpassword: \"password can't be empty\",\n\t\t\t\n\t\t}\n\n\t}\n\treset= function(){\n\t\tthis.setState( {\n\t\t\tsuccess: false,\n\t\t\tusername: '',\n\t\t\tpassword: '',\n\t\t\tshow:this.props.show,\n\t\t\tparent: this.props.parent,\n\t\t\terror : {\n\t\t\t\tusername: \"username can't be empty\",\n\t\t\t\tpassword: \"password can't be empty\",\n\n\t\t\t}\n\t\t});\n\t}\n\tcomponentDidMount() {\n\t\tthis.reset();\n\t\tthis.setState({show: this.props.show});\n\t\tthis.forceUpdate();\n\t\tthis.setState({success:false});\n\n\t}\n\thandleClose = () => {\n\t\tthis.reset();\n\t\tthis.setState({show: false});\n\t}\n\thandleShow = () => this.setState({show: true});\n\t\n\tpasswordHandler =(event) =>{\n\t\tlet password= event.target.value;\n\t\tif(password.length <= 3){\n\t\t\tlet er= this.state.error;\n\t\t\ter.password=\"password must be longer than 3 characters\"\n\t\t\tthis.setState({error: er});\n\t\t}\n\t\telse if(password.length >= 16){\n\t\t\tlet er= this.state.error;\n\t\t\ter.password=\"password must be shorter than 16 characters\"\n\t\t\tthis.setState({error: er});\n\t\t}\n\t\telse{\n\t\t\tlet er= this.state.error;\n\t\t\ter.password=\"\";\n\t\t\tthis.setState({error: er});\n\t\t\tthis.setState({password: password});\n\t\t}\n\t\t\n\t}\n\tusernameHandler =(event) => {\n\t\tlet name= event.target.value;\n\t\tlet username= event.target.value;\n\t\tif(username.length <= 3){\n\t\t\tlet er= this.state.error;\n\t\t\ter.username=\"username must be longer than 4 characters\"\n\t\t\tthis.setState({error: er});\n\t\t\tthis.setState({username: \"\"});\n\t\t}\n\t\telse if(username.length >= 16){\n\t\t\tlet er= this.state.error;\n\t\t\ter.username=\"username must be shorter than 16 characters\"\n\t\t\tthis.setState({error: er});\n\t\t\tthis.setState({username: \"\"});\n\t\t}\n\t\telse{\n\t\t\tlet er= this.state.error;\n\t\t\ter.username=\"\";\n\t\t\tthis.setState({error: er});\n\t\t\tthis.setState({username: username});\n\t\t}\n\t}\n\t\n\tinputHandler=(event) => {\n\t\tif(event.key==\"Enter\"){\n\t\t\tif(event.target.type!=\"button\")\n\t\t\tthis.submitHandler(event);\n\t\t}\n\t};\n\tshowRegisterForm=(event)=> {\n\t\tevent.preventDefault();\n\t\tif(this.state.parent){\n\t\t\tthis.handleClose();\n\t\t\tthis.state.parent.showRegisterForm(event);\n\n\t\t}\n\t}\n\tsubmitHandler=(event) => {\n\t\tlet error_alert=\"\";\n\t\tfor (let error in this.state.error){\n\t\t\tif(this.state.error[error]){\n\t\t\t\terror_alert = error_alert +this.state.error[error]+\"\\n\";\n\t\t\t}\n\t\t}\n\t\tif(error_alert){\n\t\t\talert(error_alert);\n\t\t}\n\t\telse {\n\t\t\tlet body= {\n\t\t\t\t\"username\":this.state.username,\n\t\t\t\t\"email\": this.state.email,\n\t\t\t\t\"password\":this.state.password,\n\t\t\t\t\"password_confirm\": this.state.password_confirm\n\t\t\t}\n\t\t\tconst querystring = require('querystring');\n\t\t\t\n\t\t\taxios.post(\"/login\",querystring.stringify(body)).then(res => {\n\t\t\t\t\n\t\t\t\tif(res.data.token){\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tconfig.updateToken(res.data.token);\n\t\t\t\t\t\n\t\t\t\t\tconfig.updateToken(this.state.username,res.data.token);\n\t\t\t\t\t//this.setState({success:true});\n\t\t\t\t\tthis.handleClose();\n\t\t\t\t\tif(this.state.parent){\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.state.parent.refresh();\n\t\t\t\t\t}\n\t\t\t\t\t//location.reload(true);\n\t\t\t\t}\n\t\t\t\telse{\n\n\t\t\t\t\talert(res.data);\t\n\t\t\t\t}\n\t\t\t}).catch(function(error){\n\t\t\t\tconsole.log(error);\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t}\n\t}\n\trender() {\n\t\tlet modalStart= \"\";\n\t\t\n\t\tlet redirect= this.state.success;\n\t\t\n\t\tif(redirect){\n\t\t\treturn <Redirect to='/' />\n\t\t}\n\t\tlet name= this.state.username;\n\t\tlet greetings=\"\";\n\t\tif(name){\n\t\t\tgreetings= \"Welcome \"+name;\n\t\t}\n\t\telse{\n\t\t\tgreetings=\"\";\n\t\t}\n\t\tif(this.props.modal){\n\t\t\treturn (\n\n\t\t\t\t<Modal show={this.state.show} onHide={this.handleClose}>\n\t\t\t\t<div>\n\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t<Modal.Title>Login</Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body >\n\t\t\t\t<h1>{greetings}</h1>\n\t\t\t\t\n\n\t\t\t\t<Form onKeyDown={this.inputHandler}>\n\t\t\t\t<Form.Group controlId=\"formUsername\">\n\t\t\t\t<Form.Label>Username</Form.Label>\n\t\t\t\t<Form.Control type=\"text\" placeholder=\"Username\" onChange={this.usernameHandler} />\n\t\t\t\t</Form.Group>\n\n\n\t\t\t\t<Form.Group controlId=\"formPassword\">\n\t\t\t\t<Form.Label>Password</Form.Label>\n\t\t\t\t<Form.Control type=\"password\" placeholder=\"Password\" onChange={this.passwordHandler} />\n\t\t\t\t</Form.Group>\n\n\t\t\t\t<Form.Group controlId=\"formSubmit\">\n\t\t\t\t<Button variant=\"primary\" onClick={this.submitHandler}>Submit</Button>\n\t\t\t\t</Form.Group>\n\t\t\t\t</Form>\n\t\t\t\t<p>You don't have an account? <a href=\"#\" onClick={this.showRegisterForm}>Register</a></p>\n\t\t\t\t</Modal.Body>\n\t\t\t\t</div>\n\t\t\t\t</Modal>\n\n\t\t\t\t);\n\t\t}\n\t\treturn (\n\n\t\t\t<div>\n\t\t\t<h1>{greetings}</h1>\n\t\t\t<h2>Login</h2>\n\t\t\t\n\t\t\t<Form onKeyDown={this.inputHandler}>\n\t\t\t<Form.Group controlId=\"formUsername\">\n\t\t\t<Form.Label>Username</Form.Label>\n\t\t\t<Form.Control type=\"text\" placeholder=\"Username\" onChange={this.usernameHandler} />\n\t\t\t</Form.Group>\n\n\n\t\t\t<Form.Group controlId=\"formPassword\">\n\t\t\t<Form.Label>Password</Form.Label>\n\t\t\t<Form.Control type=\"password\" placeholder=\"Password\" onChange={this.passwordHandler} />\n\t\t\t</Form.Group>\n\n\t\t\t<Form.Group controlId=\"formSubmit\">\n\t\t\t<Button variant=\"primary\" onClick={this.submitHandler} >Submit</Button>\n\t\t\t</Form.Group>\n\t\t\t</Form>\n\t\t\t<p>You don't have an account? <Link to=\"/register\">Register</Link></p>\n\t\t\t</div>\n\t\t\t\n\t\t\t);\n\n\t\t}\n\t}\n\texport default LoginComponent;"]},"metadata":{},"sourceType":"module"}