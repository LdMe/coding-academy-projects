{"ast":null,"code":"var _jsxFileName = \"/home/danel/Rendu/MERN_LaBoheme/src/components/product/ProductEditComponent.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Row, Col, Modal, Form, FormControl, FormGroup, ControlLabel, HelpBlock, Checkbox, Radio, Button } from 'react-bootstrap';\nimport config from '../../config';\nconst axios = config.axios;\n\nclass ProductEditComponent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.variations = {\n      public: \"success\",\n      friends: \"warning\",\n      private: \"danger\"\n    };\n    this.state = {\n      title: '',\n      username: '',\n      description: '',\n      price: 0,\n      image: null,\n      categories: null,\n      category: null,\n      localImage: null,\n      show: false\n    };\n    this.error = {\n      title: '',\n      image: ''\n    };\n\n    this.handleClose = () => {\n      this.reset();\n      this.setState({\n        show: false\n      });\n    };\n\n    this.handleShow = () => this.setState({\n      show: true\n    });\n\n    this.handler = {\n      user: function (event) {},\n      price: function (event) {}\n    };\n\n    this.reset = function () {\n      this.setState({\n        title: this.props.Product.title,\n        username: '',\n        description: this.props.Product.description,\n        image: null,\n        price: this.props.Product.price,\n        category: this.props.Product.category,\n        localImage: null,\n        show: false\n      });\n      this.error = {\n        title: '',\n        image: ''\n      };\n      axios.get('/category').then(res => {\n        console.log(res.data);\n        const categories = res.data;\n        this.setState({\n          categories: categories\n        });\n      }).catch(error => {\n        console.log(\"fucking!!\");\n      });\n    };\n\n    this.titleHandler = event => {\n      let value = event.target.value;\n\n      if (value.length < 4) {\n        this.error.title = \"title must be longer\";\n      } else if (value.length > 50) {\n        this.error.title = \"title must be shorter\";\n      } else {\n        this.error.title = '';\n        this.setState({\n          title: event.target.value\n        });\n      }\n    };\n\n    this.descriptionHandler = event => {\n      let value = event.target.value;\n\n      if (value.length > 250) {\n        this.error.description = \"description must be shorter \";\n      } else if (value != this.props.Product.description) {\n        this.error.description = '';\n        this.setState({\n          description: event.target.value\n        });\n      }\n    };\n\n    this.priceHandler = event => {\n      this.setState({\n        price: event.target.value\n      });\n    };\n\n    this.categoryHandler = e => {\n      this.setState({\n        category: e.target.value\n      });\n    };\n\n    this.imageHandler = e => {\n      e.preventDefault();\n\n      if (!e.target.files) {\n        this.error.image = '';\n        return;\n      }\n\n      let ext_array = e.target.files[0].name.split(\".\");\n      let ext = ext_array[ext_array.length - 1];\n\n      if (ext != \"jpg\" && ext != \"jpeg\" && ext != \"png\" && ext != \"gif\") {\n        alert(\"image format is not correct\");\n        this.error.image = 'image format is not correct';\n        return;\n      }\n\n      this.error.image = '';\n      this.setState({\n        image: e.target.files[0],\n        localImage: URL.createObjectURL(e.target.files[0])\n      });\n    };\n\n    this.changeHandler = e => {\n      this.setState({\n        description: e.target.value\n      });\n    };\n\n    this.submitHandler = event => {\n      console.log(\"fssfsd\");\n      let error_alert = \"\";\n\n      for (let error in this.error) {\n        if (this.error[error]) {\n          error_alert = error_alert + this.error[error] + \"\\n\";\n        }\n      }\n\n      if (error_alert) {\n        alert(error_alert);\n        return;\n      }\n\n      event.preventDefault();\n      let form_data = new FormData();\n      let title = this.state.title;\n      let price = this.state.price;\n      let username = config.username();\n      let description = this.state.description;\n      let category = this.state.category;\n      form_data.append('username', config.username());\n      form_data.append('_id', this.props.Product._id);\n      form_data.append('title', title);\n      form_data.append('price', price);\n\n      if (category) {\n        form_data.append('category', category);\n      }\n\n      form_data.append('description', description);\n\n      if (this.state.image) {\n        form_data.append('image', this.state.image, this.state.image.name);\n      }\n\n      let url = config.url + '/Product/edit';\n      axios.post(url, form_data, {\n        headers: {\n          'content-type': 'multipart/form-data'\n        }\n      }).then(res => {\n        this.reset();\n        alert(res.data);\n        this.handleClose();\n      }).catch(err => {\n        alert(err.response.data);\n      });\n    };\n  }\n\n  componentWillReceiveProps(newProps) {\n    this.props = newProps;\n  }\n\n  componentDidMount() {\n    this.reset();\n    this.setState({\n      show: this.props.show\n    });\n  }\n\n  render() {\n    let categoryDefault = \"\";\n\n    if (this.props.Product.category) {\n      categoryDefault = this.props.Product.category.title;\n    }\n\n    let result = \"\";\n\n    if (Array.isArray(this.state.categories) && this.state.categories.length) {\n      result = this.state.categories.map(category => React.createElement(\"option\", {\n        key: category._id,\n        value: category._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, category.title));\n    }\n\n    if (!this.props.Product) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      });\n    }\n\n    if (this.props.modal) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"Edit Product\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(Form, {\n        encType: \"multipart/form-data\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"Product title\"), React.createElement(Form.Control, {\n        type: \"text\",\n        defaultValue: this.props.Product.title,\n        onChange: this.titleHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, \"Product text\"), React.createElement(Form.Control, {\n        type: \"text\",\n        defaultValue: this.props.Product.description,\n        onChange: this.descriptionHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Product price\"), React.createElement(Form.Control, {\n        type: \"number\",\n        onChange: this.priceHandler,\n        defaultValue: this.props.Product.price,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"category\",\n        defaultValue: categoryDefault,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"Product category\"), React.createElement(\"select\", {\n        onChange: this.categoryHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        key: \"0\",\n        value: \"null\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, \"no category\"), result)), React.createElement(Form.Group, {\n        controlId: \"image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Product image\"), React.createElement(Form.Control, {\n        type: \"file\",\n        onChange: this.imageHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formSubmit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.submitHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"Submit\"))))));\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, \"Edit Product\"), React.createElement(Form, {\n        encType: \"multipart/form-data\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, \"Product title\"), React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Product title\",\n        onChange: this.titleHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, \"Product text\"), React.createElement(Form.Control, {\n        type: \"text\",\n        onChange: this.descriptionHandler,\n        defaultValue: this.props.Product.description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, \"Product price\"), React.createElement(Form.Control, {\n        type: \"number\",\n        onChange: this.priceHandler,\n        defaultValue: this.props.Product.price,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"category\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, \"Product category\"), React.createElement(\"select\", {\n        onChange: this.categoryHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, result)), React.createElement(Form.Group, {\n        controlId: \"image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, \"Product image\"), React.createElement(Form.Control, {\n        type: \"file\",\n        onChange: this.imageHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formSubmit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.submitHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, \"Submit\"))));\n    }\n  }\n\n}\n\nexport default ProductEditComponent;","map":{"version":3,"sources":["/home/danel/Rendu/MERN_LaBoheme/src/components/product/ProductEditComponent.js"],"names":["React","Link","Row","Col","Modal","Form","FormControl","FormGroup","ControlLabel","HelpBlock","Checkbox","Radio","Button","config","axios","ProductEditComponent","Component","variations","public","friends","private","state","title","username","description","price","image","categories","category","localImage","show","error","handleClose","reset","setState","handleShow","handler","user","event","props","Product","get","then","res","console","log","data","catch","titleHandler","value","target","length","descriptionHandler","priceHandler","categoryHandler","e","imageHandler","preventDefault","files","ext_array","name","split","ext","alert","URL","createObjectURL","changeHandler","submitHandler","error_alert","form_data","FormData","append","_id","url","post","headers","err","response","componentWillReceiveProps","newProps","componentDidMount","render","categoryDefault","result","Array","isArray","map","modal"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {Row,Col, Modal, Form, FormControl, FormGroup, ControlLabel, HelpBlock, Checkbox, Radio, Button} from 'react-bootstrap';\nimport config from '../../config';\nconst axios = config.axios;\n\n\n\nclass ProductEditComponent extends React.Component {\n    variations= {\n        public: \"success\",\n        friends: \"warning\",\n        private: \"danger\"\n    }\n    state= {\n        title:'',\n        username:'',\n        description:'',\n        price: 0,\n        image: null,\n        categories: null,\n        category: null,\n        localImage: null,\n        show: false,\n\n\n    };\n    error= {\n        title: '',\n        image: ''\n    };\n    componentWillReceiveProps(newProps) {\n        this.props=newProps;\n    }\n    handleClose = () => {\n        this.reset();\n        this.setState({show: false});\n    }\n    handleShow = () => this.setState({show: true});\n    componentDidMount(){\n\n\n        this.reset();\n        this.setState({show: this.props.show});\n    };\n    handler= {\n        user: function(event){\n\n        },\n        price: function(event){\n\n\n        }\n    }\n    reset= function(){\n        this.setState( {\n            title:this.props.Product.title,\n            username:'',\n            description: this.props.Product.description,\n            image: null,\n            price: this.props.Product.price,\n            category: this.props.Product.category,\n            localImage: null,\n            show: false,\n        });\n        this.error= {\n            title: '',\n            image: ''\n        };\n        axios.get('/category').then(res => {\n\n            console.log(res.data);\n            const categories = res.data;\n            this.setState({categories :categories});\n\n        }).catch(error => {\n            console.log(\"fucking!!\");\n        });\n    }\n    titleHandler =(event) => {\n        let value= event.target.value;\n        if(value.length<4){\n            this.error.title=\"title must be longer\";\n        }\n        else if(value.length > 50){\n            this.error.title=\"title must be shorter\";\n        }\n        else{\n            this.error.title='';\n            this.setState({\n                title: event.target.value\n            })\n        }\n    }\n    descriptionHandler= (event)=> {\n        let value= event.target.value;\n        if(value.length > 250){\n            this.error.description=\"description must be shorter \";\n        }\n        else if (value != this.props.Product.description){\n            this.error.description='';\n            this.setState({\n                description: event.target.value\n            })\n        }\n    }\n    priceHandler = (event) => {\n        this.setState({price: event.target.value});\n    }\n\n    categoryHandler = (e) => {\n        this.setState({category : e.target.value});\n\n    };\n    imageHandler = (e) => {\n        e.preventDefault();\n        if( !e.target.files){\n            this.error.image='';\n            return;\n        }\n        let ext_array= e.target.files[0].name.split(\".\");\n        let ext= ext_array[ext_array.length-1];\n\n        if(ext!= \"jpg\" && ext!=\"jpeg\" && ext!=\"png\" && ext!=\"gif\"){\n            alert(\"image format is not correct\");\n            this.error.image='image format is not correct';\n            return;\n        }\n        this.error.image='';\n        this.setState({\n            image: e.target.files[0],\n            localImage: URL.createObjectURL(e.target.files[0])\n        })\n    };\n    changeHandler = (e) => {\n        this.setState({description : e.target.value});\n\n    };\n\n    submitHandler=(event) => {\n        console.log(\"fssfsd\")\n        let error_alert=\"\";\n        for (let error in this.error){\n            if(this.error[error]){\n                error_alert = error_alert +this.error[error]+\"\\n\";\n            }\n        }\n        if(error_alert){\n            alert(error_alert);\n            return;\n        }\n\n        event.preventDefault();\n\n        let form_data= new FormData();\n        let title= this.state.title;\n        let price= this.state.price;\n        let username= config.username();\n        let description= this.state.description;\n        let category= this.state.category;\n        form_data.append('username',config.username());\n        form_data.append('_id',this.props.Product._id);\n        form_data.append('title', title);\n        form_data.append('price', price);\n        if(category){\n            form_data.append('category', category);\n        }\n        form_data.append('description', description);\n        if(this.state.image){\n            form_data.append('image',this.state.image,this.state.image.name);\n\n        }\n        let url = config.url +'/Product/edit';\n\n        axios.post(url, form_data, {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        })\n        .then(res => {\n            this.reset();\n            alert(res.data);\n\n            this.handleClose();\n        })\n        .catch(err => {\n\n            alert(err.response.data);\n\n\n        })\n\n\n    };\n    render(){\n        let categoryDefault=\"\"\n        if(this.props.Product.category){\n            categoryDefault= this.props.Product.category.title;\n        }\n        \n        let result =\"\";\n        if(Array.isArray(this.state.categories) && this.state.categories.length){\n            result= this.state.categories.map(category => <option key={category._id} value={category._id}>{category.title}</option>);\n        }\n        if(!this.props.Product){\n            return (<div/>);\n        }\n        if(this.props.modal){\n            return(\n            <div>\n            <Modal show={this.state.show} onHide={this.handleClose}>\n            <Modal.Header closeButton>\n            <Modal.Title>Edit Product</Modal.Title>\n            </Modal.Header>\n            <Modal.Body >\n            <Form encType=\"multipart/form-data\">\n            <Form.Group controlId=\"title\">\n            <Form.Label>Product title</Form.Label>\n            <Form.Control type=\"text\"  defaultValue={this.props.Product.title} onChange={this.titleHandler} />\n            </Form.Group>\n            <Form.Group controlId=\"description\">\n            <Form.Label>Product text</Form.Label>\n            <Form.Control type=\"text\"   defaultValue={this.props.Product.description}  onChange={this.descriptionHandler} />\n            </Form.Group>\n            <Form.Group controlId=\"price\">\n            <Form.Label>Product price</Form.Label>\n            <Form.Control type=\"number\"   onChange={this.priceHandler} defaultValue={this.props.Product.price} />\n            </Form.Group>\n            <Form.Group controlId=\"category\" defaultValue={categoryDefault}>\n            <Form.Label>Product category</Form.Label>\n            <select   onChange={this.categoryHandler} >\n            <option  key=\"0\" value=\"null\" >no category</option>\n            {result}\n            </select>\n\n            </Form.Group>\n            <Form.Group controlId=\"image\">\n            <Form.Label>Product image</Form.Label>\n            <Form.Control type=\"file\"  onChange={this.imageHandler} />\n            </Form.Group>\n\n            <Form.Group controlId=\"formSubmit\">\n            <Button variant=\"primary\" onClick={this.submitHandler}>Submit</Button>\n            </Form.Group>\n            </Form>\n            </Modal.Body>\n            </Modal>\n\n            </div>\n            );\n        }\n        else{\n            return(\n            <div>\n\n            <h2>Edit Product</h2>\n\n\n            <Form encType=\"multipart/form-data\">\n            <Form.Group controlId=\"title\">\n            <Form.Label>Product title</Form.Label>\n            <Form.Control type=\"text\"  placeholder=\"Product title\" onChange={this.titleHandler} />\n            </Form.Group>\n            <Form.Group controlId=\"description\">\n            <Form.Label>Product text</Form.Label>\n            <Form.Control type=\"text\"   onChange={this.descriptionHandler} defaultValue={this.props.Product.description} />\n            </Form.Group>\n            <Form.Group controlId=\"price\">\n            <Form.Label>Product price</Form.Label>\n            <Form.Control type=\"number\"   onChange={this.priceHandler} defaultValue={this.props.Product.price}/>\n            </Form.Group>\n            <Form.Group controlId=\"category\">\n            <Form.Label>Product category</Form.Label>\n            <select   onChange={this.categoryHandler} >\n            {result}\n            </select>\n            </Form.Group>\n            <Form.Group controlId=\"image\">\n            <Form.Label>Product image</Form.Label>\n            <Form.Control type=\"file\"  onChange={this.imageHandler} />\n            </Form.Group>\n            \n            <Form.Group controlId=\"formSubmit\">\n            <Button variant=\"primary\" onClick={this.submitHandler}>Submit</Button>\n            </Form.Group>\n            </Form>\n\n\n            </div>\n            );\n        }\n    }\n}\nexport default ProductEditComponent;"]},"metadata":{},"sourceType":"module"}