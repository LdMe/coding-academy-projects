{"ast":null,"code":"var _jsxFileName = \"/home/danel/Rendu/MERN_LaBoheme/src/components/product/ProductShowComponent.js\";\nimport React from 'react';\nimport { Card, Button } from 'react-bootstrap';\nimport config from '../../config';\nimport ProductEditComponent from './ProductEditComponent';\nimport delete_product from './ProductDeleteComponent';\nconst axios = config.axios;\n\nclass ProductShowComponent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      comments: [],\n      show: false,\n      modal: null,\n      showText: {\n        true: \"hide comments\",\n        false: \"show comments\"\n      },\n      showButton: {\n        true: \"secondary\",\n        false: \"primary\"\n      }\n    };\n\n    this.showComments = function (event) {\n      let show = !this.state.show;\n      this.setState({\n        show: show\n      });\n\n      if (show) {\n        console.log(\"Ssafdsaf\");\n        this.interval = setInterval(() => {\n          let params = {\n            _id: this.props.product._id\n          };\n          axios.get('/comment', {\n            params: params\n          }).then(res => {\n            console.log(res.data);\n            const comments = res.data;\n            this.setState({\n              comments: comments\n            });\n          }).catch(error => {\n            console.log(\"error\");\n          });\n        }, 1000);\n      } else {\n        clearInterval(this.interval);\n      }\n    };\n\n    this.deleteProduct = function (event) {\n      delete_product(this.props.product._id);\n    };\n\n    this.showEditForm = function (event) {\n      event.preventDefault();\n      console.log(\"modalllll\");\n      this.state.modal.handleShow();\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      modal: this.refs.modal\n    });\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  showEditButton() {\n    /*\n       if(config.username()!= this.props.product.user.username){\n           return \"\";\n       }\n      */\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.showEditForm.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Edit\"), React.createElement(Button, {\n      variant: \"danger\",\n      onClick: this.deleteProduct.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Delete\"));\n  }\n\n  render() {\n    if (!this.props.product) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      });\n    }\n\n    let product = this.props.product;\n    /*\n    let commentText=\"\";\n    let commentCreate=\"\";\n    if(this.state.show){\n        commentCreate=<CommentCreateComponent product_id={this.props.product._id}/>;\n         if(this.state.comments.length){\n            commentText=this.state.comments.map(comment => <div key={comment._id}>\n                <CommentShowComponent comment={comment} depth={1}/>\n            </div>);\n        }\n        else{\n            commentText= <h5>Be the first one to comment!</h5>\n        }\n     }\n    */\n\n    let image = \"\";\n\n    if (product.image) {\n      image = React.createElement(Card.Img, {\n        variant: \"left\",\n        src: config.url + '/images/products/' + product._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(Card, {\n      style: {\n        width: \"90%\",\n        height: \"90%\",\n        margin: \"auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, image, React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Card.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, product.title), React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, product.description), React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, (product.price / 100).toFixed(2), \"\\u20AC\"), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"visibility: \", product.visibility), this.showEditButton(), React.createElement(ProductEditComponent, {\n      ref: \"modal\",\n      modal: true,\n      Product: this.props.product,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(Button, {\n      variant: this.state.showButton[this.state.show],\n      onClick: this.showComments.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, this.state.showText[this.state.show])));\n  }\n\n}\n\nexport default ProductShowComponent;","map":{"version":3,"sources":["/home/danel/Rendu/MERN_LaBoheme/src/components/product/ProductShowComponent.js"],"names":["React","Card","Button","config","ProductEditComponent","delete_product","axios","ProductShowComponent","Component","state","comments","show","modal","showText","true","false","showButton","showComments","event","setState","console","log","interval","setInterval","params","_id","props","product","get","then","res","data","catch","error","clearInterval","deleteProduct","showEditForm","preventDefault","handleShow","componentDidMount","refs","componentWillUnmount","showEditButton","bind","render","image","url","width","height","margin","title","description","price","toFixed","visibility"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Card, Button} from 'react-bootstrap';\nimport config from '../../config';\nimport ProductEditComponent from './ProductEditComponent';\nimport delete_product from './ProductDeleteComponent';\nconst axios = config.axios;\nclass ProductShowComponent extends React.Component{\n    state= {\n        comments: [],\n        show: false,\n        modal: null,\n        showText: {\n            true: \"hide comments\",\n            false: \"show comments\"\n        },\n        showButton: {\n            true: \"secondary\",\n            false: \"primary\"\n        }\n    }\n    componentDidMount(){\n        this.setState({modal: this.refs.modal})\n    }\n    componentWillUnmount() {\n        clearInterval(this.interval);\n\n    }\n    showComments= function(event){\n        let show=!this.state.show;\n        this.setState({show: show});\n        if(show){\n            console.log(\"Ssafdsaf\");\n            this.interval= setInterval(()=>{\n                let params= {\n                    _id: this.props.product._id\n                }\n                axios.get('/comment',{params: params}).then(res => {\n                    console.log(res.data);\n                    const comments = res.data;\n                    this.setState({comments:comments});\n\n\n                }).catch(error => {\n                    console.log(\"error\");\n\n\n                });\n            },1000);\n        }\n        else{\n            clearInterval(this.interval);\n\n        }\n\n    }\n    deleteProduct= function(event){\n        delete_product(this.props.product._id);\n    }\n    showEditForm=function(event){\n        event.preventDefault();\n        console.log(\"modalllll\")\n        this.state.modal.handleShow();\n    }\n    showEditButton(){\n     /*\n        if(config.username()!= this.props.product.user.username){\n            return \"\";\n        }\n\n      */\n        return <div><Button variant=\"primary\" onClick={this.showEditForm.bind(this)} >Edit</Button>\n            <Button variant=\"danger\"  onClick={this.deleteProduct.bind(this)}>Delete</Button></div>\n            ;\n    }\n    render(){\n        if(!this.props.product){\n            return (<div/>);\n        }\n        let product= this.props.product;\n        /*\n        let commentText=\"\";\n        let commentCreate=\"\";\n        if(this.state.show){\n            commentCreate=<CommentCreateComponent product_id={this.props.product._id}/>;\n\n            if(this.state.comments.length){\n                commentText=this.state.comments.map(comment => <div key={comment._id}>\n                    <CommentShowComponent comment={comment} depth={1}/>\n                </div>);\n            }\n            else{\n                commentText= <h5>Be the first one to comment!</h5>\n            }\n\n        }\n        */\n        let image=\"\";\n        if(product.image){\n            image= <Card.Img variant=\"left\" src={config.url + '/images/products/'+product._id}/>;\n        }\n        return(\n            <Card style={{width:\"90%\", height:\"90%\", margin: \"auto\"}}>\n                {image}\n                <Card.Body>\n                    <Card.Title>{product.title}</Card.Title>\n                    <Card.Text>{product.description}</Card.Text>\n                    <Card.Text>{(product.price /100 ).toFixed(2)}€</Card.Text>\n                    <h4>visibility: {product.visibility}</h4>\n                    {this.showEditButton()}\n                    <ProductEditComponent ref=\"modal\" modal={true} Product={this.props.product}/>\n\n                    <Button variant={this.state.showButton[this.state.show]}  onClick={this.showComments.bind(this)}>{this.state.showText[this.state.show]}</Button>\n                    \n                </Card.Body>\n            </Card>\n        );\n    }\n}\nexport default ProductShowComponent;"]},"metadata":{},"sourceType":"module"}